<form [formGroup]="group">

  <div formArrayName="rows" cdkDropList (cdkDropListDropped)="onRowDrop($event)">

    <div *ngFor="let row of rows.controls; index as index; last as isLast" class="row mt-4 mb-4"
         cdkDrag cdkDragLockAxis="y" @rowAnim>

      <div *cdkDragPlaceholder class="mt-3 mb-3"></div>

      <app-input-row class="col" [formControlName]="index"></app-input-row>

      <div class="col-auto">

        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">

          <div class="btn-group" role="group" aria-label="Button group">

            <button type="button" class="btn btn-danger"
                    [disabled]="rows.controls.length == 1" (click)="removeRow(index)">
              <img src="/assets/img/trash.svg" alt="Trash Icon" title="Delete row">
            </button>

            <button type="button" class="btn btn-light"
                    [disabled]="rows.controls.length == 1" (click)="moveRow(index, -1)">
              <img src="/assets/img/arrow-up.svg" alt="Arrow Up Icon" title="Move row up">
            </button>

            <button type="button" class="btn btn-light"
                    [disabled]="rows.controls.length == 1" (click)="moveRow(index, +1)">
              <img src="/assets/img/arrow-down.svg" alt="Arrow Down Icon" title="Move row down">
            </button>

            <button type="button" class="btn btn-light" [disabled]="rows.controls.length == 1" cdkDragHandle>
              <img src="/assets/img/arrows-fullscreen.svg" alt="Drag & Drop Icon" title="Drag and drop row">
            </button>

            <button type="button" class="btn btn-light"
                    [disabled]="rows.controls.length == 1" (click)="insertRow(index + 1)">
              <img src="/assets/img/plus.svg" alt="Plus Icon" title="Add row">
            </button>

          </div>

        </div>

      </div>

    </div>

  </div>

</form>

<button type="button" class="btn btn-primary" (click)="addRow()">

  <svg class="bi bi-plus" width="1.5em" height="1.5em" viewBox="0 0 20 20" fill="currentColor"
       xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" d="M10 5.5a.5.5 0 01.5.5v4a.5.5 0 01-.5.5H6a.5.5 0 010-1h3.5V6a.5.5 0 01.5-.5z"
          clip-rule="evenodd"/>
    <path fill-rule="evenodd" d="M9.5 10a.5.5 0 01.5-.5h4a.5.5 0 010 1h-3.5V14a.5.5 0 01-1 0v-4z" clip-rule="evenodd"/>
  </svg>

  <span class="align-middle">Add Row</span>

</button>

<pre class="mt-4"><code>{{group.value | json}}</code></pre>
